
[![真格智能实验室](https://labs.zgwit.com/logo.png)](https://labs.zgwit.com)

# IoT Master 物联大师

物联大师是[真格智能实验室](https://labs.zgwit.com)推出的一款通用的数据采集和自动控制系统，
集成了Modbus和一些主流PLC的通讯协议，
适用于大部分物联网或工业互联网数据应用场景。
该产品提供数据采集，历史存储，定时控制和自动策略等功能。
平台提供丰富的元件库和在线模板，可以直接用于大部分物联网项目后端，快速，方便，高效。

>作者曾经接触多个物联网实际项目的后端，需求大同小异，
因为团队不同，实现方式就千奇百怪了，大家其实都在重复地造轮子。
痛定思痛，于是决定提取共同的部分，做成了通用的物联大师，
并且通过开源的方式免费分享给小伙伴儿们使用。

## 项目架构图

【待补充】



## 后端介绍

### 技术栈

项目最初使用高性能的Golang进行开发，但是实测效果并不明显，而且内存占用偏高。
故而切换成更熟悉的Node.js，普通桌面机实测5w连接无压力，这要归功于它所依赖的异步IO库libuv。

>吐槽一下：Golang 到处都是 `if err!=nil`，真心不习惯，没有异常处理，没有泛型，不支持IOCP

框架：Koa、joi-router

数据库：MongoDB（灵活，好用，关键是和Node.js真搭）

内存数据库：Redis（可以不启用）

### 开发目标
- [x] 数据通道
  - [x] TCP通道，以及注册包和心跳包支持
  - [ ] UDP通道，以及注册包和心跳包支持
  - [ ] 串口通道（暂无必要）
  - [x] 网络AT（直接操控DTU，修改串口参数、网络地址等）
- [x] 协议支持
  - [x] Modbus RTU
  - [x] Modbus TCP
  - [ ] Modbus ASCII（不常用，暂无必要）
  - [ ] Omron PLC（hostlink, fins）
  - [ ] Mitsubishi PLC (melsec)
  - [ ] Siemens PLC (S7)
- [x] 设备 & 采集 & 控制
  - [x] 定时轮询
  - [ ] 变量映射
  - [ ] 控制指令
  - [ ] 监听器（插件）
    - [x] 存入历史数据库
    - [ ] 均值计算
    - [ ] 报警器
    - [ ] 其他
- [ ] 项目
  - [ ] 规则引擎（数值关系，逻辑关系）
  - [ ] 脚本
- [ ] 接口
  - [ ] 系统接口，通道管理，项目管理
  - [ ] WebSocket（通道，异常，报警）
  - [ ] 开放接口
- [ ] 其他功能
  - [x] 虚拟串口
  - [ ] 数据透传（方便远程调试）


## 前端介绍

### 技术栈

基础框架：Angular10，框架自身集成度高，不再需要选组件搭架子，上手虽难，用着也爽

界面框架：Ant.Design（NG-ZORROR)，应用广泛，风格比较适合中文环境

### 开发目标
- [ ] 登录和主页面框架
- [ ] 通道管理
  - [ ] 服务管理
  - [ ] 通道管理，数据监听，透传  
- [ ] 项目管理
  - [ ] 集成CodeMirror，以JSON或YAML方便编辑项目，支持JavaScript语法
  - [ ] 可视化编辑
- [ ] 设备管理
- [ ] 数据分析
  - [ ] 曲线图
    - [ ] 时间区间
    - [ ] 时间粒度

## 其他
- 项目还在开发中，有兴趣的小伙伴可以加入进来[jason@zgwit.com](mailto:jason@zgwit.com)




